<!doctype html>
<html lang="da">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lektion 7: En Dag p√• Caf√© | Samovar</title>
    <link rel="stylesheet" href="../../css/style.css" />
    <link rel="stylesheet" href="../css/beginner.css" />
    <style>
      /* ============================================
           STORY-DRIVEN LESSON STYLES
           ============================================ */

      :root {
        --story-bg: #1a1a2e;
        --story-accent: #e94560;
        --story-warm: #f8b739;
        --story-cool: #667eea;
        --cafe-brown: #8b4513;
        --cafe-cream: #f5f0e8;
      }

      /* === Full-screen Story Sections === */
      .story-section {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: var(--space-xl) var(--space-m);
        position: relative;
        overflow: hidden;
      }

      .story-section::before {
        content: '';
        position: absolute;
        inset: 0;
        opacity: 0.1;
        pointer-events: none;
      }

      /* === Hero / Opening Scene === */
      .story-hero {
        background: linear-gradient(135deg, var(--story-bg) 0%, #16213e 100%);
        color: white;
        text-align: center;
        min-height: 100vh;
      }

      .story-hero h1 {
        font-size: clamp(2.5rem, 8vw, 5rem);
        color: white;
        margin-bottom: var(--space-m);
        opacity: 0;
        animation: fadeSlideUp 1s ease forwards;
      }

      .story-hero .lead {
        font-size: clamp(1.1rem, 3vw, 1.5rem);
        color: rgba(255, 255, 255, 0.8);
        max-width: 600px;
        margin: 0 auto var(--space-xl);
        opacity: 0;
        animation: fadeSlideUp 1s ease 0.3s forwards;
      }

      .story-meta {
        display: flex;
        justify-content: center;
        gap: var(--space-l);
        font-size: 0.9rem;
        opacity: 0.6;
        margin-bottom: var(--space-xl);
        opacity: 0;
        animation: fadeSlideUp 1s ease 0.5s forwards;
      }

      .scroll-hint {
        position: absolute;
        bottom: var(--space-xl);
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--space-s);
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.85rem;
        animation: bounce 2s infinite;
      }

      .scroll-hint svg {
        width: 24px;
        height: 24px;
      }

      /* === Scene Cards === */
      .scene {
        background: var(--cafe-cream);
        position: relative;
      }

      .scene-inner {
        max-width: 800px;
        margin: 0 auto;
      }

      .scene-number {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        color: var(--story-accent);
        margin-bottom: var(--space-s);
      }

      .scene-title {
        font-size: clamp(1.8rem, 5vw, 2.5rem);
        font-family: var(--font-serif);
        margin-bottom: var(--space-m);
        color: var(--text-ink);
      }

      .scene-narrative {
        font-size: 1.15rem;
        line-height: 1.8;
        color: var(--text-faded);
        margin-bottom: var(--space-l);
      }

      /* === Cafe Environment === */
      .cafe-environment {
        background: linear-gradient(180deg, var(--cafe-brown) 0%, #654321 100%);
        color: white;
        padding: var(--space-xl);
        border-radius: 16px;
        margin: var(--space-l) 0;
        position: relative;
        overflow: hidden;
      }

      .cafe-environment::before {
        content: '‚òï';
        position: absolute;
        font-size: 15rem;
        opacity: 0.05;
        right: -2rem;
        top: -2rem;
      }

      .cafe-environment h3 {
        color: white;
        font-size: 1.5rem;
        margin-bottom: var(--space-m);
      }

      /* === Character Dialogue === */
      .dialogue-scene {
        background: white;
        border-radius: 16px;
        padding: var(--space-l);
        margin: var(--space-l) 0;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      }

      .character {
        display: flex;
        gap: var(--space-m);
        margin-bottom: var(--space-m);
        opacity: 0;
        transform: translateY(20px);
        animation: fadeSlideUp 0.5s ease forwards;
      }

      .character:nth-child(1) {
        animation-delay: 0.1s;
      }
      .character:nth-child(2) {
        animation-delay: 0.3s;
      }
      .character:nth-child(3) {
        animation-delay: 0.5s;
      }
      .character:nth-child(4) {
        animation-delay: 0.7s;
      }
      .character:nth-child(5) {
        animation-delay: 0.9s;
      }

      .character-avatar {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        flex-shrink: 0;
      }

      .character-avatar.anna {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .character-avatar.waiter {
        background: linear-gradient(135deg, var(--cafe-brown) 0%, #654321 100%);
      }

      .character-bubble {
        flex: 1;
        background: var(--bg-paper);
        padding: var(--space-m);
        border-radius: 16px;
        border-bottom-left-radius: 4px;
        position: relative;
        cursor: pointer;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
      }

      .character-bubble:hover {
        transform: scale(1.02);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .character-bubble.right {
        background: var(--story-cool);
        color: white;
        border-bottom-left-radius: 16px;
        border-bottom-right-radius: 4px;
      }

      .character-name {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--text-light);
        margin-bottom: 4px;
      }

      .character-bubble.right .character-name {
        color: rgba(255, 255, 255, 0.7);
      }

      .character-russian {
        font-family: var(--font-serif);
        font-size: 1.2rem;
        margin-bottom: 4px;
      }

      .character-danish {
        font-size: 0.9rem;
        color: var(--text-light);
        font-style: italic;
      }

      .character-bubble.right .character-danish {
        color: rgba(255, 255, 255, 0.7);
      }

      /* === Interactive Moments === */
      .interactive-moment {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: var(--space-xl);
        border-radius: 16px;
        margin: var(--space-l) 0;
        text-align: center;
      }

      .interactive-moment h3 {
        color: white;
        font-size: 1.5rem;
        margin-bottom: var(--space-s);
      }

      .interactive-moment p {
        opacity: 0.9;
        margin-bottom: var(--space-l);
      }

      /* === Menu Card (Story Version) === */
      .story-menu {
        background: white;
        border-radius: 16px;
        padding: var(--space-l);
        margin: var(--space-l) 0;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        max-width: 400px;
      }

      .story-menu-header {
        text-align: center;
        border-bottom: 2px solid var(--story-accent);
        padding-bottom: var(--space-s);
        margin-bottom: var(--space-m);
      }

      .story-menu-header h3 {
        font-family: var(--font-serif);
        font-size: 1.8rem;
        margin: 0;
      }

      .menu-category {
        margin-bottom: var(--space-m);
      }

      .menu-category-title {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--text-light);
        margin-bottom: var(--space-s);
      }

      .story-menu-item {
        display: flex;
        justify-content: space-between;
        padding: var(--space-s) 0;
        border-bottom: 1px dotted var(--line-color);
        cursor: pointer;
        transition: all 0.2s;
      }

      .story-menu-item:hover {
        background: var(--bg-paper);
        padding-left: var(--space-s);
        padding-right: var(--space-s);
        margin-left: calc(-1 * var(--space-s));
        margin-right: calc(-1 * var(--space-s));
        border-radius: 4px;
      }

      .story-menu-item:last-child {
        border-bottom: none;
      }

      .menu-item-name {
        font-family: var(--font-serif);
        font-size: 1.1rem;
      }

      .menu-item-price {
        color: var(--story-accent);
        font-weight: 600;
      }

      /* === Phrase Cards (Floating) === */
      .phrase-float {
        display: inline-block;
        background: white;
        padding: var(--space-s) var(--space-m);
        border-radius: 50px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        margin: var(--space-xs);
        cursor: pointer;
        transition: all 0.3s;
        font-family: var(--font-serif);
      }

      .phrase-float:hover {
        transform: translateY(-4px) scale(1.05);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      }

      .phrase-float .russian {
        color: var(--text-ink);
      }

      .phrase-float .danish {
        color: var(--text-light);
        font-size: 0.85rem;
        margin-left: var(--space-xs);
      }

      /* === Transition Scenes === */
      .transition-scene {
        background: var(--story-bg);
        color: white;
        text-align: center;
        min-height: 60vh;
      }

      .transition-scene .big-emoji {
        font-size: 6rem;
        margin-bottom: var(--space-m);
        display: block;
      }

      .transition-scene h2 {
        color: white;
        font-size: 2rem;
      }

      .transition-scene p {
        color: rgba(255, 255, 255, 0.7);
        font-size: 1.1rem;
      }

      /* === Cultural Note (Story) === */
      .culture-card {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        padding: var(--space-l);
        border-radius: 16px;
        margin: var(--space-l) 0;
        position: relative;
        overflow: hidden;
      }

      .culture-card::before {
        content: 'üá∑üá∫';
        position: absolute;
        font-size: 8rem;
        opacity: 0.1;
        right: -1rem;
        bottom: -1rem;
      }

      .culture-card h4 {
        color: white;
        font-size: 1.2rem;
        margin-bottom: var(--space-s);
      }

      .culture-card p {
        opacity: 0.95;
        line-height: 1.6;
      }

      /* === Exercise Embedded in Story === */
      .story-exercise {
        background: white;
        border-radius: 16px;
        padding: var(--space-xl);
        margin: var(--space-l) 0;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      }

      .story-exercise h3 {
        text-align: center;
        margin-bottom: var(--space-l);
      }

      /* === Coworking Scene === */
      .coworking-scene {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .laptop-phrases {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: var(--space-m);
        margin-top: var(--space-l);
      }

      .laptop-phrase {
        background: rgba(255, 255, 255, 0.15);
        padding: var(--space-m);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s;
        backdrop-filter: blur(10px);
      }

      .laptop-phrase:hover {
        background: rgba(255, 255, 255, 0.25);
        transform: translateY(-4px);
      }

      .laptop-phrase .russian {
        font-family: var(--font-serif);
        font-size: 1.1rem;
        margin-bottom: 4px;
      }

      .laptop-phrase .danish {
        font-size: 0.9rem;
        opacity: 0.8;
      }

      /* === Final Summary === */
      .story-summary {
        background: var(--story-bg);
        color: white;
      }

      .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--space-m);
        margin-top: var(--space-l);
      }

      .summary-item {
        background: rgba(255, 255, 255, 0.1);
        padding: var(--space-m);
        border-radius: 12px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
      }

      .summary-item:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: scale(1.05);
      }

      .summary-item .russian {
        font-family: var(--font-serif);
        font-size: 1.2rem;
        margin-bottom: 4px;
      }

      .summary-item .danish {
        font-size: 0.85rem;
        opacity: 0.7;
      }

      /* === Navigation === */
      .story-nav {
        background: white;
        padding: var(--space-xl);
      }

      /* === Animations === */
      @keyframes fadeSlideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateX(-50%) translateY(0);
        }
        40% {
          transform: translateX(-50%) translateY(-10px);
        }
        60% {
          transform: translateX(-50%) translateY(-5px);
        }
      }

      /* === Scroll Animations === */
      .reveal {
        opacity: 0;
        transform: translateY(40px);
        transition: all 0.8s ease;
      }

      .reveal.visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* === Responsive === */
      @media (max-width: 768px) {
        .story-section {
          padding: var(--space-l) var(--space-s);
        }

        .character {
          flex-direction: column;
          gap: var(--space-s);
        }

        .character-avatar {
          width: 40px;
          height: 40px;
        }
      }

      /* Hide default header/footer for immersive experience */
      body {
        overflow-x: hidden;
      }

      .container {
        max-width: none;
        padding: 0;
      }

      header,
      footer {
        display: none;
      }

      /* Floating back button */
      .floating-nav {
        position: fixed;
        top: var(--space-m);
        left: var(--space-m);
        z-index: 100;
        display: flex;
        gap: var(--space-s);
      }

      .floating-btn {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border: none;
        padding: var(--space-s) var(--space-m);
        border-radius: 50px;
        cursor: pointer;
        font-size: 0.9rem;
        color: var(--text-ink);
        text-decoration: none;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
      }

      .floating-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 30px rgba(0, 0, 0, 0.15);
      }

      /* Progress indicator */
      .progress-bar {
        position: fixed;
        top: 0;
        left: 0;
        height: 3px;
        background: var(--story-accent);
        z-index: 1000;
        transition: width 0.1s;
      }
    </style>
  </head>

  <body>
    <div class="progress-bar" id="progress-bar"></div>

    <nav class="floating-nav">
      <a href="../index.html" class="floating-btn">‚Üê Tilbage</a>
      <a href="07-cafe.html" class="floating-btn">Klassisk version</a>
    </nav>

    <div class="container">
      <!-- ============================================
             SCENE 1: HERO / OPENING
             ============================================ -->
      <section class="story-section story-hero">
        <div class="story-meta">
          <span>Lektion 7</span>
          <span>‚Ä¢</span>
          <span>Niveau A1</span>
          <span>‚Ä¢</span>
          <span>~15 min</span>
        </div>
        <h1>En Dag p√• Caf√©</h1>
        <p class="lead">
          Anna er i Moskva for f√∏rste gang. Hun finder en hyggelig caf√© og skal bestille sin f√∏rste
          kaffe p√• russisk...
        </p>
        <div class="scroll-hint">
          <span>Scroll for at begynde</span>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 5v14M5 12l7 7 7-7" />
          </svg>
        </div>
      </section>

      <!-- ============================================
             SCENE 2: SETTING THE SCENE
             ============================================ -->
      <section class="story-section scene">
        <div class="scene-inner reveal">
          <div class="scene-number">Scene 1</div>
          <h2 class="scene-title">Cafeen</h2>
          <p class="scene-narrative">
            Det er en kold vinterdag i Moskva. Anna g√•r ind p√• en lille caf√© i centrum. Det dufter
            af friskbrygget kaffe og varme croissanter. Hun finder et bord ved vinduet og venter p√•
            tjeneren...
          </p>

          <div class="cafe-environment">
            <h3>‚òï –ö–∞—Ñ–µ ¬´–£—é—Ç¬ª</h3>
            <p>En typisk russisk caf√©: varmt, hyggeligt, og med gratis Wi-Fi.</p>
            <div style="margin-top: var(--space-m)">
              <span class="phrase-float" onclick="TTS.speak('–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!')">
                <span class="russian">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!</span>
                <span class="danish">Goddag!</span>
              </span>
              <span class="phrase-float" onclick="TTS.speak('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!')">
                <span class="russian">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</span>
                <span class="danish">Velkommen!</span>
              </span>
            </div>
          </div>

          <div class="culture-card">
            <h4>üá∑üá∫ Kulturelt tip</h4>
            <p>
              I russiske caf√©er er det helt normalt at sidde i timevis med √©n kop kaffe. Mange
              bruger caf√©er som arbejdsplads ‚Äî det er accepteret og forventet!
            </p>
          </div>
        </div>
      </section>

      <!-- ============================================
             SCENE 3: THE MENU
             ============================================ -->
      <section class="story-section scene" style="background: white">
        <div class="scene-inner reveal">
          <div class="scene-number">Scene 2</div>
          <h2 class="scene-title">Menukortet</h2>
          <p class="scene-narrative">
            Tjeneren kommer med menukortet. Anna kigger p√• det og pr√∏ver at l√¶se de russiske ord.
            Heldigvis kender hun allerede nogle af dem...
          </p>

          <div class="story-menu">
            <div class="story-menu-header">
              <h3>–ú–ï–ù–Æ</h3>
            </div>

            <div class="menu-category">
              <div class="menu-category-title">–ù–∞–ø–∏—Ç–∫–∏ (Drikkevarer)</div>
              <div class="story-menu-item" onclick="TTS.speak('–ö–æ—Ñ–µ')">
                <span class="menu-item-name">–ö–æ—Ñ–µ</span>
                <span class="menu-item-price">150 ‚ÇΩ</span>
              </div>
              <div class="story-menu-item" onclick="TTS.speak('–ö–∞–ø—É—á–∏–Ω–æ')">
                <span class="menu-item-name">–ö–∞–ø—É—á–∏–Ω–æ</span>
                <span class="menu-item-price">200 ‚ÇΩ</span>
              </div>
              <div class="story-menu-item" onclick="TTS.speak('–ß–∞–π')">
                <span class="menu-item-name">–ß–∞–π</span>
                <span class="menu-item-price">100 ‚ÇΩ</span>
              </div>
            </div>

            <div class="menu-category">
              <div class="menu-category-title">–ï–¥–∞ (Mad)</div>
              <div class="story-menu-item" onclick="TTS.speak('–ö—Ä—É–∞—Å—Å–∞–Ω')">
                <span class="menu-item-name">–ö—Ä—É–∞—Å—Å–∞–Ω</span>
                <span class="menu-item-price">120 ‚ÇΩ</span>
              </div>
              <div class="story-menu-item" onclick="TTS.speak('–ë–ª–∏–Ω—ã')">
                <span class="menu-item-name">–ë–ª–∏–Ω—ã</span>
                <span class="menu-item-price">250 ‚ÇΩ</span>
              </div>
              <div class="story-menu-item" onclick="TTS.speak('–ë–æ—Ä—â')">
                <span class="menu-item-name">–ë–æ—Ä—â</span>
                <span class="menu-item-price">350 ‚ÇΩ</span>
              </div>
            </div>
          </div>

          <p class="scene-narrative" style="margin-top: var(--space-l)">
            <em>Klik p√• et element i menuen for at h√∏re udtalen!</em>
          </p>
        </div>
      </section>

      <!-- ============================================
             SCENE 4: THE CONVERSATION
             ============================================ -->
      <section class="story-section scene">
        <div class="scene-inner reveal">
          <div class="scene-number">Scene 3</div>
          <h2 class="scene-title">Bestillingen</h2>
          <p class="scene-narrative">
            Tjeneren kommer hen til Annas bord. Nu skal hun bestille p√• russisk for f√∏rste gang.
            Hendes hjerte banker lidt hurtigere...
          </p>

          <div class="dialogue-scene" id="main-dialogue">
            <!-- Dialogue will be rendered by JS -->
          </div>

          <div class="interactive-moment">
            <h3>üéØ Din tur!</h3>
            <p>Hvad ville DU bestille? Pr√∏v at sige det h√∏jt:</p>
            <div style="margin-top: var(--space-m)">
              <span
                class="phrase-float"
                onclick="TTS.speak('–ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–æ—Ñ–µ.')"
                style="background: white; color: var(--text-ink)"
              >
                <span class="russian">–ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–æ—Ñ–µ.</span>
              </span>
              <span
                class="phrase-float"
                onclick="TTS.speak('–ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —á–∞–π.')"
                style="background: white; color: var(--text-ink)"
              >
                <span class="russian">–ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —á–∞–π.</span>
              </span>
              <span
                class="phrase-float"
                onclick="TTS.speak('–ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–∞–ø—É—á–∏–Ω–æ.')"
                style="background: white; color: var(--text-ink)"
              >
                <span class="russian">–ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–∞–ø—É—á–∏–Ω–æ.</span>
              </span>
            </div>
          </div>
        </div>
      </section>

      <!-- ============================================
             SCENE 5: GRAMMAR MOMENT
             ============================================ -->
      <section class="story-section transition-scene">
        <div class="scene-inner reveal">
          <span class="big-emoji">üí°</span>
          <h2>Grammatik-pause</h2>
          <p style="max-width: 500px; margin: 0 auto">
            Bem√¶rk hvordan Anna bestiller:
            <strong style="color: var(--story-warm)">¬´–ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞...¬ª</strong><br />
            Det betyder bogstaveligt "Til mig, tak..." ‚Äî en meget h√∏flig m√•de at bestille p√•!
          </p>

          <div
            style="
              margin-top: var(--space-xl);
              display: flex;
              flex-wrap: wrap;
              justify-content: center;
              gap: var(--space-m);
            "
          >
            <div
              style="
                background: rgba(255, 255, 255, 0.1);
                padding: var(--space-m);
                border-radius: 12px;
                text-align: left;
              "
            >
              <div style="color: var(--story-warm); font-size: 0.8rem; margin-bottom: 4px">
                H√òFLIG
              </div>
              <div style="font-family: var(--font-serif); font-size: 1.2rem">
                –ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–æ—Ñ–µ.
              </div>
            </div>
            <div
              style="
                background: rgba(255, 255, 255, 0.1);
                padding: var(--space-m);
                border-radius: 12px;
                text-align: left;
              "
            >
              <div style="color: var(--story-accent); font-size: 0.8rem; margin-bottom: 4px">
                DIREKTE
              </div>
              <div style="font-family: var(--font-serif); font-size: 1.2rem">–Ø —Ö–æ—á—É –∫–æ—Ñ–µ.</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ============================================
             SCENE 6: MODERN CAFE LIFE
             ============================================ -->
      <section class="story-section coworking-scene">
        <div class="scene-inner reveal">
          <div class="scene-number" style="color: rgba(255, 255, 255, 0.6)">Scene 4</div>
          <h2 class="scene-title" style="color: white">Arbejde i Cafeen</h2>
          <p class="scene-narrative" style="color: rgba(255, 255, 255, 0.8)">
            Anna tager sin laptop frem. Hun skal arbejde lidt, mens hun nyder sin kaffe. Men f√∏rst
            har hun brug for Wi-Fi-koden...
          </p>

          <div class="laptop-phrases">
            <div class="laptop-phrase" onclick="TTS.speak('–ú–æ–∂–Ω–æ –ø–∞—Ä–æ–ª—å –æ—Ç Wi-Fi?')">
              <div class="russian">–ú–æ–∂–Ω–æ –ø–∞—Ä–æ–ª—å –æ—Ç Wi-Fi?</div>
              <div class="danish">M√• jeg f√• Wi-Fi-koden?</div>
            </div>
            <div class="laptop-phrase" onclick="TTS.speak('–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø–æ—Å–∏–¥–µ—Ç—å —Å –Ω–æ—É—Ç–±—É–∫–æ–º?')">
              <div class="russian">–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø–æ—Å–∏–¥–µ—Ç—å —Å –Ω–æ—É—Ç–±—É–∫–æ–º?</div>
              <div class="danish">Kan jeg sidde her med min laptop?</div>
            </div>
            <div class="laptop-phrase" onclick="TTS.speak('–ï—Å—Ç—å —Ä–æ–∑–µ—Ç–∫–∞?')">
              <div class="russian">–ï—Å—Ç—å —Ä–æ–∑–µ—Ç–∫–∞?</div>
              <div class="danish">Er der en stikkontakt?</div>
            </div>
            <div class="laptop-phrase" onclick="TTS.speak('–ú–Ω–µ –µ—â—ë –æ–¥–∏–Ω –∫–æ—Ñ–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.')">
              <div class="russian">–ú–Ω–µ –µ—â—ë –æ–¥–∏–Ω –∫–æ—Ñ–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.</div>
              <div class="danish">Endnu en kaffe, tak.</div>
            </div>
          </div>

          <div
            style="
              background: rgba(255, 255, 255, 0.1);
              padding: var(--space-m);
              border-radius: 12px;
              margin-top: var(--space-xl);
              text-align: center;
            "
          >
            <p style="margin: 0; font-style: italic; opacity: 0.9">
              üòÖ ¬´–Ø –∑–∞–∫–∞–∂—É –µ—â—ë –æ–¥–∏–Ω –∫–æ—Ñ–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ä–∞–±–æ—Ç–∞—é –∑–¥–µ—Å—å —É–∂–µ –¥–≤–∞ —á–∞—Å–∞.¬ª<br />
              <span style="font-size: 0.9rem; opacity: 0.7"
                >(Jeg bestiller endnu en kaffe, fordi jeg har arbejdet her i to timer
                allerede.)</span
              >
            </p>
          </div>
        </div>
      </section>

      <!-- ============================================
             SCENE 7: MILK OPTIONS
             ============================================ -->
      <section class="story-section scene" style="background: white">
        <div class="scene-inner reveal">
          <div class="scene-number">Scene 5</div>
          <h2 class="scene-title">Med m√¶lk?</h2>
          <p class="scene-narrative">
            Tjeneren sp√∏rger Anna om hun vil have m√¶lk i sin kaffe. I moderne russiske caf√©er er der
            mange muligheder...
          </p>

          <div class="dialogue-scene">
            <div class="character">
              <div class="character-avatar waiter">üë®‚Äçüç≥</div>
              <div class="character-bubble" onclick="TTS.speak('–° –º–æ–ª–æ–∫–æ–º?')">
                <div class="character-name">Tjener</div>
                <div class="character-russian">–° –º–æ–ª–æ–∫–æ–º?</div>
                <div class="character-danish">Med m√¶lk?</div>
              </div>
            </div>
          </div>

          <p class="scene-narrative">Anna kan svare:</p>

          <div style="display: flex; flex-wrap: wrap; gap: var(--space-s); justify-content: center">
            <span class="phrase-float" onclick="TTS.speak('–î–∞, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.')">
              <span class="russian">–î–∞, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.</span>
              <span class="danish">Ja tak.</span>
            </span>
            <span class="phrase-float" onclick="TTS.speak('–ù–µ—Ç, —Å–ø–∞—Å–∏–±–æ.')">
              <span class="russian">–ù–µ—Ç, —Å–ø–∞—Å–∏–±–æ.</span>
              <span class="danish">Nej tak.</span>
            </span>
            <span class="phrase-float" onclick="TTS.speak('–° –æ–≤—Å—è–Ω—ã–º, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.')">
              <span class="russian">–° –æ–≤—Å—è–Ω—ã–º, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.</span>
              <span class="danish">Med havrem√¶lk, tak.</span>
            </span>
            <span class="phrase-float" onclick="TTS.speak('–ë–µ–∑ –º–æ–ª–æ–∫–∞.')">
              <span class="russian">–ë–µ–∑ –º–æ–ª–æ–∫–∞.</span>
              <span class="danish">Uden m√¶lk.</span>
            </span>
          </div>

          <div class="culture-card" style="margin-top: var(--space-xl)">
            <h4>ü•õ Moderne trend</h4>
            <p>
              ¬´–û–≤—Å—è–Ω–æ–µ –º–æ–ª–æ–∫–æ¬ª (havrem√¶lk) er blevet meget popul√¶rt i russiske caf√©er. Du kan ogs√•
              finde —Å–æ–µ–≤–æ–µ (soja) og –º–∏–Ω–¥–∞–ª—å–Ω–æ–µ (mandel) m√¶lk.
            </p>
          </div>
        </div>
      </section>

      <!-- ============================================
             SCENE 8: PAYING
             ============================================ -->
      <section class="story-section scene">
        <div class="scene-inner reveal">
          <div class="scene-number">Scene 6</div>
          <h2 class="scene-title">Regningen</h2>
          <p class="scene-narrative">
            Anna har nydt sin kaffe og croissant. Nu er det tid til at betale. Hun kalder p√•
            tjeneren...
          </p>

          <div class="dialogue-scene" id="payment-dialogue">
            <!-- Payment dialogue rendered by JS -->
          </div>

          <div class="culture-card">
            <h4>üí≥ Betaling i Rusland</h4>
            <p>
              De fleste steder accepterer kort (–∫–∞—Ä—Ç–æ–π). Kontanter (–Ω–∞–ª–∏—á–Ω—ã–º–∏) bruges sj√¶ldnere.
              Drikkepenge er ikke obligatoriske, men 10% er blevet normalt i storbyer.
            </p>
          </div>
        </div>
      </section>

      <!-- ============================================
             SCENE 9: PRACTICE
             ============================================ -->
      <section class="story-section transition-scene">
        <div class="scene-inner reveal">
          <span class="big-emoji">üéÆ</span>
          <h2>Tid til at √∏ve!</h2>
          <p style="max-width: 500px; margin: 0 auto var(--space-xl)">
            Nu har du set Anna bestille p√• caf√©. Lad os teste hvad du har l√¶rt!
          </p>
        </div>
      </section>

      <section class="story-section scene" style="background: white">
        <div class="scene-inner">
          <div class="story-exercise reveal">
            <h3>üéß Lytte√∏velse</h3>
            <div id="listening-exercise"></div>
          </div>

          <div class="story-exercise reveal">
            <h3>‚úçÔ∏è Udfyld tomme pladser</h3>
            <div id="fill-blank-exercise"></div>
          </div>

          <div class="story-exercise reveal">
            <h3>üîó Par ordene</h3>
            <div id="matching-exercise"></div>
          </div>
        </div>
      </section>

      <!-- ============================================
             SCENE 10: SUMMARY
             ============================================ -->
      <section class="story-section story-summary">
        <div class="scene-inner reveal">
          <div class="scene-number" style="color: var(--story-accent)">Afslutning</div>
          <h2 class="scene-title" style="color: white">Hvad du har l√¶rt</h2>
          <p class="scene-narrative" style="color: rgba(255, 255, 255, 0.7)">
            Anna klarede det! Og nu kan du ogs√• bestille p√• en russisk caf√©. Her er de vigtigste
            fraser:
          </p>

          <div class="summary-grid">
            <div class="summary-item" onclick="TTS.speak('–ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞...')">
              <div class="russian">–ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞...</div>
              <div class="danish">Jeg vil gerne have...</div>
            </div>
            <div class="summary-item" onclick="TTS.speak('–ú–æ–∂–Ω–æ —Å—á—ë—Ç?')">
              <div class="russian">–ú–æ–∂–Ω–æ —Å—á—ë—Ç?</div>
              <div class="danish">M√• jeg f√• regningen?</div>
            </div>
            <div class="summary-item" onclick="TTS.speak('–°–∫–æ–ª—å–∫–æ —ç—Ç–æ —Å—Ç–æ–∏—Ç?')">
              <div class="russian">–°–∫–æ–ª—å–∫–æ —ç—Ç–æ —Å—Ç–æ–∏—Ç?</div>
              <div class="danish">Hvor meget koster det?</div>
            </div>
            <div class="summary-item" onclick="TTS.speak('–ú–æ–∂–Ω–æ –ø–∞—Ä–æ–ª—å –æ—Ç Wi-Fi?')">
              <div class="russian">–ú–æ–∂–Ω–æ –ø–∞—Ä–æ–ª—å –æ—Ç Wi-Fi?</div>
              <div class="danish">M√• jeg f√• Wi-Fi-koden?</div>
            </div>
            <div class="summary-item" onclick="TTS.speak('–ï—Å—Ç—å —Ä–æ–∑–µ—Ç–∫–∞?')">
              <div class="russian">–ï—Å—Ç—å —Ä–æ–∑–µ—Ç–∫–∞?</div>
              <div class="danish">Er der en stikkontakt?</div>
            </div>
            <div class="summary-item" onclick="TTS.speak('–°–ø–∞—Å–∏–±–æ, –æ—á–µ–Ω—å –≤–∫—É—Å–Ω–æ!')">
              <div class="russian">–°–ø–∞—Å–∏–±–æ, –æ—á–µ–Ω—å –≤–∫—É—Å–Ω–æ!</div>
              <div class="danish">Tak, det var l√¶kkert!</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ============================================
             NAVIGATION
             ============================================ -->
      <section class="story-section story-nav" style="min-height: auto; padding: var(--space-xl)">
        <div class="scene-inner">
          <nav class="lesson-nav">
            <a href="06-food.html" class="lesson-nav-item">
              <span class="lesson-nav-label">Forrige lektion</span>
              <span class="lesson-nav-title">Mad og Drikke</span>
            </a>
            <a href="08-time.html" class="lesson-nav-item">
              <span class="lesson-nav-label">N√¶ste lektion</span>
              <span class="lesson-nav-title">Hvad Er Klokken?</span>
            </a>
          </nav>
        </div>
      </section>
    </div>

    <script src="../js/lesson-engine.js"></script>
    <script>
      // ============================================
      // DIALOGUE DATA
      // ============================================
      const mainDialogueData = [
        {
          speaker: 'waiter',
          name: 'Tjener',
          russian: '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß—Ç–æ –±—É–¥–µ—Ç–µ –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å?',
          danish: 'Goddag! Hvad vil De bestille?',
        },
        {
          speaker: 'anna',
          name: 'Anna',
          russian: '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ú–Ω–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–∞–ø—É—á–∏–Ω–æ.',
          danish: 'Goddag! Jeg vil gerne have en cappuccino, tak.',
        },
        {
          speaker: 'waiter',
          name: 'Tjener',
          russian: '–ë–æ–ª—å—à–æ–π –∏–ª–∏ –º–∞–ª–µ–Ω—å–∫–∏–π?',
          danish: 'Stor eller lille?',
        },
        { speaker: 'anna', name: 'Anna', russian: '–ë–æ–ª—å—à–æ–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.', danish: 'Stor, tak.' },
        { speaker: 'waiter', name: 'Tjener', russian: '–ß—Ç–æ-–Ω–∏–±—É–¥—å –µ—â—ë?', danish: 'Noget andet?' },
        {
          speaker: 'anna',
          name: 'Anna',
          russian: '–î–∞, –∫—Ä—É–∞—Å—Å–∞–Ω, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.',
          danish: 'Ja, en croissant, tak.',
        },
        {
          speaker: 'waiter',
          name: 'Tjener',
          russian: '–•–æ—Ä–æ—à–æ. –¢—Ä–∏—Å—Ç–∞ –¥–≤–∞–¥—Ü–∞—Ç—å —Ä—É–±–ª–µ–π.',
          danish: 'OK. Tre hundrede og tyve rubler.',
        },
        {
          speaker: 'anna',
          name: 'Anna',
          russian: '–í–æ—Ç, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞. –°–ø–∞—Å–∏–±–æ!',
          danish: 'V√¶rsgo. Tak!',
        },
      ];

      const paymentDialogueData = [
        {
          speaker: 'anna',
          name: 'Anna',
          russian: '–ú–æ–∂–Ω–æ —Å—á—ë—Ç, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞?',
          danish: 'M√• jeg f√• regningen, tak?',
        },
        {
          speaker: 'waiter',
          name: 'Tjener',
          russian: '–ö–æ–Ω–µ—á–Ω–æ. –¢—Ä–∏—Å—Ç–∞ –¥–≤–∞–¥—Ü–∞—Ç—å —Ä—É–±–ª–µ–π.',
          danish: 'Selvf√∏lgelig. Tre hundrede og tyve rubler.',
        },
        {
          speaker: 'anna',
          name: 'Anna',
          russian: '–ú–æ–∂–Ω–æ –∫–∞—Ä—Ç–æ–π?',
          danish: 'Kan jeg betale med kort?',
        },
        { speaker: 'waiter', name: 'Tjener', russian: '–î–∞, –∫–æ–Ω–µ—á–Ω–æ.', danish: 'Ja, selvf√∏lgelig.' },
        { speaker: 'anna', name: 'Anna', russian: '–°–ø–∞—Å–∏–±–æ! –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!', danish: 'Tak! Farvel!' },
        {
          speaker: 'waiter',
          name: 'Tjener',
          russian: '–î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –ü—Ä–∏—Ö–æ–¥–∏—Ç–µ –µ—â—ë!',
          danish: 'Farvel! Kom igen!',
        },
      ];

      // ============================================
      // RENDER DIALOGUE
      // ============================================
      function renderDialogue(containerId, data) {
        const container = document.getElementById(containerId);
        if (!container) return;

        data.forEach((line, index) => {
          const isAnna = line.speaker === 'anna';
          const character = document.createElement('div');
          character.className = 'character';
          character.style.animationDelay = `${index * 0.2}s`;

          if (isAnna) {
            character.innerHTML = `
                        <div class="character-avatar anna">üë©</div>
                        <div class="character-bubble right" onclick="TTS.speak('${line.russian.replace(/'/g, "\\'")}')">
                            <div class="character-name">${line.name}</div>
                            <div class="character-russian">${line.russian}</div>
                            <div class="character-danish">${line.danish}</div>
                        </div>
                    `;
          } else {
            character.innerHTML = `
                        <div class="character-avatar waiter">üë®‚Äçüç≥</div>
                        <div class="character-bubble" onclick="TTS.speak('${line.russian.replace(/'/g, "\\'")}')">
                            <div class="character-name">${line.name}</div>
                            <div class="character-russian">${line.russian}</div>
                            <div class="character-danish">${line.danish}</div>
                        </div>
                    `;
          }

          container.appendChild(character);
        });
      }

      // ============================================
      // EXERCISE DATA
      // ============================================
      const listeningData = [
        {
          audio: '–ú–æ–∂–Ω–æ –º–µ–Ω—é?',
          options: ['M√• jeg se menuen?', 'M√• jeg f√• regningen?', 'Hvad koster det?'],
          correct: 0,
        },
        {
          audio: '–°–∫–æ–ª—å–∫–æ —ç—Ç–æ —Å—Ç–æ–∏—Ç?',
          options: ['Hvad anbefaler De?', 'Hvor er toilettet?', 'Hvor meget koster det?'],
          correct: 2,
        },
        {
          audio: '–°—á—ë—Ç, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞',
          options: ['Menuen, tak', 'Regningen, tak', 'Kaffe, tak'],
          correct: 1,
        },
        {
          audio: '–ú–Ω–µ –∫–æ—Ñ–µ',
          options: ['Jeg vil have kaffe', 'Jeg kan lide kaffe', 'Har du kaffe?'],
          correct: 0,
        },
      ];

      const fillBlankData = [
        {
          text: '–ú–Ω–µ, ___, –∫–æ—Ñ–µ.',
          answer: '–ø–æ–∂–∞–ª—É–π—Å—Ç–∞',
          hint: 'tak',
          danish: 'Jeg vil gerne have kaffe, tak.',
        },
        { text: '–ú–æ–∂–Ω–æ ___?', answer: '—Å—á—ë—Ç', hint: 'regningen', danish: 'M√• jeg f√• regningen?' },
        {
          text: '–°–∫–æ–ª—å–∫–æ —ç—Ç–æ ___?',
          answer: '—Å—Ç–æ–∏—Ç',
          hint: 'koster',
          danish: 'Hvor meget koster det?',
        },
      ];

      const matchingData = [
        { russian: '—Å—á—ë—Ç', danish: 'regningen' },
        { russian: '–º–µ–Ω—é', danish: 'menuen' },
        { russian: '–≤–∫—É—Å–Ω–æ', danish: 'l√¶kker' },
        { russian: '–±–æ–ª—å—à–æ–π', danish: 'stor' },
        { russian: '–º–∞–ª–µ–Ω—å–∫–∏–π', danish: 'lille' },
      ];

      // ============================================
      // SCROLL ANIMATIONS
      // ============================================
      function initScrollAnimations() {
        const reveals = document.querySelectorAll('.reveal');

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add('visible');
              }
            });
          },
          {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px',
          },
        );

        reveals.forEach((el) => observer.observe(el));
      }

      // ============================================
      // PROGRESS BAR
      // ============================================
      function initProgressBar() {
        const progressBar = document.getElementById('progress-bar');

        window.addEventListener('scroll', () => {
          const scrollTop = window.scrollY;
          const docHeight = document.documentElement.scrollHeight - window.innerHeight;
          const progress = (scrollTop / docHeight) * 100;
          progressBar.style.width = `${progress}%`;
        });
      }

      // ============================================
      // INITIALIZE
      // ============================================
      document.addEventListener('DOMContentLoaded', function () {
        // Render dialogues
        renderDialogue('main-dialogue', mainDialogueData);
        renderDialogue('payment-dialogue', paymentDialogueData);

        // Initialize exercises
        new ListeningExercise('listening-exercise', listeningData);
        new FillBlankExercise('fill-blank-exercise', fillBlankData);
        new MatchingExercise('matching-exercise', matchingData);

        // Initialize scroll animations
        initScrollAnimations();
        initProgressBar();
      });
    </script>
  </body>
</html>
