<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Прилагательные | Samovar</title>
    <link rel="stylesheet" href="../css/style.css" />
    <style>
      .ending-chip {
        display: inline-block;
        padding: 5px 12px;
        border: 1px solid var(--accent-blue);
        border-radius: 15px;
        margin: 0 5px;
        cursor: pointer;
        transition: all 0.2s;
        background: white;
      }

      .ending-chip:hover {
        background: #e3f2fd;
      }

      .ending-chip.selected {
        background: var(--accent-blue);
        color: white;
      }

      .sentence-row {
        background: white;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 10px;
        border: 1px solid #eee;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .gap-word {
        font-weight: bold;
        color: var(--accent-red);
        border-bottom: 2px dashed var(--accent-red);
        padding: 0 5px;
        min-width: 30px;
        display: inline-block;
        text-align: center;
      }

      .short-form-card {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .transform-arrow {
        color: var(--accent-blue);
        font-weight: bold;
        font-size: 1.2rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <a href="../index.html" class="logo">Samovar.</a>
        <nav>
          <a href="../index.html">Главная</a>
          <a href="nouns.html">Род</a>
          <a
            href="adjectives.html"
            class="active"
            style="color: var(--text-ink); border-bottom: 1px solid var(--accent-red)"
            >Прилагательные</a
          >
        </nav>
      </header>

      <main class="content-block">
        <div class="content-main">
          <h1>Прилагательные: Согласование</h1>
          <p class="lead">
            Прилагательное в русском — это хамелеон. Оно меняет окончание в зависимости от рода,
            числа и падежа существительного, которое описывает.
          </p>

          <section id="agreement">
            <h2>Согласование (Kongruens)</h2>
            <p>
              В датском прилагательное не меняется (rød bil, rødt hus). В русском оно
              <strong>всегда</strong> согласуется с существительным.
            </p>

            <div class="game-container" style="background: white">
              <h3>Таблица окончаний</h3>
              <p>Прилагательные в Именительном падеже (Nominativ):</p>

              <table style="width: 100%; border-collapse: collapse; margin-top: 20px">
                <tr style="background: #f0f0f0">
                  <th style="padding: 10px; text-align: left">Род</th>
                  <th style="padding: 10px; text-align: left">Окончание</th>
                  <th style="padding: 10px; text-align: left">Пример</th>
                </tr>
                <tr>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">
                    <strong>Мужской</strong>
                  </td>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">-ый, -ий, -ой</td>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">
                    Красн<strong>ый</strong> стол
                  </td>
                </tr>
                <tr>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">
                    <strong>Женский</strong>
                  </td>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">-ая, -яя</td>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">
                    Красн<strong>ая</strong> лампа
                  </td>
                </tr>
                <tr>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">
                    <strong>Средний</strong>
                  </td>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">-ое, -ее</td>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">
                    Красн<strong>ое</strong> окно
                  </td>
                </tr>
                <tr>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">
                    <strong>Множественное</strong>
                  </td>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">-ые, -ие</td>
                  <td style="padding: 10px; border-bottom: 1px solid #eee">
                    Красн<strong>ые</strong> столы
                  </td>
                </tr>
              </table>
            </div>
          </section>

          <section id="practice">
            <h2>Практика: Конструктор</h2>
            <p>Выберите правильное окончание для слова <strong>НОВ...</strong> (Ny).</p>

            <div id="adj-game">
              <div class="sentence-row" id="row-m">
                <div>
                  Это нов<span class="gap-word" id="gap-m">...</span> <strong>стол</strong> (m).
                </div>
                <div class="options-m">
                  <span class="ending-chip" onclick="fillGap('m', 'ый')">-ый</span>
                  <span class="ending-chip" onclick="fillGap('m', 'ая')">-ая</span>
                  <span class="ending-chip" onclick="fillGap('m', 'ое')">-ое</span>
                </div>
              </div>

              <div class="sentence-row" id="row-f">
                <div>
                  Это нов<span class="gap-word" id="gap-f">...</span> <strong>лампа</strong> (f).
                </div>
                <div class="options-f">
                  <span class="ending-chip" onclick="fillGap('f', 'ый')">-ый</span>
                  <span class="ending-chip" onclick="fillGap('f', 'ая')">-ая</span>
                  <span class="ending-chip" onclick="fillGap('f', 'ое')">-ое</span>
                </div>
              </div>

              <div class="sentence-row" id="row-n">
                <div>
                  Это нов<span class="gap-word" id="gap-n">...</span> <strong>окно</strong> (n).
                </div>
                <div class="options-n">
                  <span class="ending-chip" onclick="fillGap('n', 'ый')">-ый</span>
                  <span class="ending-chip" onclick="fillGap('n', 'ая')">-ая</span>
                  <span class="ending-chip" onclick="fillGap('n', 'ое')">-ое</span>
                </div>
              </div>

              <div class="sentence-row" id="row-pl">
                <div>
                  Это нов<span class="gap-word" id="gap-pl">...</span> <strong>столы</strong> (pl).
                </div>
                <div class="options-pl">
                  <span class="ending-chip" onclick="fillGap('pl', 'ые')">-ые</span>
                  <span class="ending-chip" onclick="fillGap('pl', 'ие')">-ие</span>
                  <span class="ending-chip" onclick="fillGap('pl', 'ое')">-ое</span>
                </div>
              </div>
            </div>
            <div id="adj-feedback" class="feedback"></div>
          </section>

          <section id="short-form">
            <h2>Краткая форма (Kort form)</h2>
            <p>
              Некоторые прилагательные имеют краткую форму (как в датском: glad/glad). Она
              используется в предикативе (после глагола "быть").
            </p>

            <ul class="module-list">
              <li class="module-item">
                <strong>Полная форма:</strong> Он <em>красивый</em> (Han er smuk -
                attributivt/prædikativt)
              </li>
              <li class="module-item">
                <strong>Краткая форма:</strong> Он <em>красив</em> (Han er smuk - kun prædikativt)
              </li>
            </ul>

            <!-- Micro Practice -->
            <div class="inline-quiz">
              <span class="inline-question">Как сказать "Она счастлива" (краткая форма)?</span>
              <div class="inline-options">
                <button
                  class="inline-btn"
                  onclick="checkInline(this, false, 'Нет. Счастливый — это полная форма.')"
                >
                  Она счастливая
                </button>
                <button
                  class="inline-btn"
                  onclick="checkInline(this, true, 'Верно! Убираем окончание -ая и добавляем -а.')"
                >
                  Она счастлива
                </button>
              </div>
              <div class="inline-feedback"></div>
            </div>
          </section>
        </div>

        <aside class="content-note">
          <div class="margin-note">
            <strong>Мягкий согласный</strong>
            После мягких согласных (ч, щ, ж, ш) пишется -ий/-яя/-ее: <br />
            Хорош<strong>ий</strong>, хорош<strong>ая</strong>, хорош<strong>ее</strong>
          </div>
        </aside>
      </main>

      <footer>
        <div>&copy; 2025 Samovar</div>
      </footer>
    </div>

    <script>
      // Inline Quiz Logic
      function checkInline(btn, isCorrect, msg) {
        const container = btn.closest('.inline-quiz');
        const feedback = container.querySelector('.inline-feedback');

        container.querySelectorAll('.inline-btn').forEach((b) => {
          b.style.background = 'white';
          b.style.color = 'var(--text-faded)';
          b.style.borderColor = '#ccc';
        });

        if (isCorrect) {
          btn.style.background = 'var(--success-color)';
          btn.style.color = 'white';
          btn.style.borderColor = 'var(--success-color)';
          feedback.innerText = msg;
          feedback.className = 'inline-feedback correct';
        } else {
          btn.style.background = 'var(--error-color)';
          btn.style.color = 'white';
          btn.style.borderColor = 'var(--error-color)';
          feedback.innerText = msg;
          feedback.className = 'inline-feedback incorrect';
        }
      }

      // Main Game Logic
      function fillGap(rowId, ending) {
        const gap = document.getElementById('gap-' + rowId);
        gap.innerText = ending;
        gap.style.color = 'var(--accent-blue)';

        // Highlight selected chip
        const container = document.querySelector('.options-' + rowId);
        container.querySelectorAll('.ending-chip').forEach((c) => c.classList.remove('selected'));
        event.target.classList.add('selected');

        checkAllFilled();
      }

      function checkAllFilled() {
        const correct = {
          m: 'ый',
          f: 'ая',
          n: 'ое',
          pl: 'ые',
        };

        let allCorrect = true;
        let count = 0;

        for (let key in correct) {
          const gap = document.getElementById('gap-' + key);
          if (gap.innerText !== '...') {
            count++;
            if (gap.innerText !== correct[key]) allCorrect = false;
          }
        }

        const fb = document.getElementById('adj-feedback');
        if (count === 4) {
          if (allCorrect) {
            fb.innerText = 'Отлично! Все окончания верны.';
            fb.className = 'feedback correct';
          } else {
            fb.innerText = 'Есть ошибки. Проверьте род существительных.';
            fb.className = 'feedback incorrect';
          }
          fb.style.display = 'block';
        }
      }
    </script>
  </body>
</html>
