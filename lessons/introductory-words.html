<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–í–≤–æ–¥–Ω—ã–µ —Å–ª–æ–≤–∞ | Samovar</title>
    <link rel="stylesheet" href="../css/style.css" />
    <style>
      .conductor-visual {
        background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
        color: white;
        padding: 30px;
        border-radius: 12px;
        margin-bottom: 30px;
        text-align: center;
      }

      .conductor-title {
        font-family: var(--font-serif);
        font-size: 2rem;
        margin-bottom: 10px;
      }

      .tag-cloud {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
        margin-top: 20px;
      }

      .intro-tag {
        background: rgba(255, 255, 255, 0.2);
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.9rem;
        backdrop-filter: blur(5px);
      }

      .category-section {
        margin-bottom: 30px;
      }

      .category-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
        border-bottom: 2px solid #eee;
        padding-bottom: 5px;
      }

      .cat-icon {
        font-size: 1.5rem;
      }

      .cat-title {
        font-size: 1.3rem;
        font-weight: bold;
        color: var(--accent-blue);
      }

      .word-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 10px;
      }

      .word-card {
        background: white;
        border: 1px solid #e0e0e0;
        padding: 10px;
        border-radius: 8px;
        text-align: center;
        transition: transform 0.2s;
      }

      .word-card:hover {
        border-color: var(--accent-blue);
        transform: translateY(-2px);
      }

      .word-ru {
        font-weight: bold;
        display: block;
      }
      .word-dk {
        font-size: 0.8rem;
        color: #888;
        font-style: italic;
      }

      /* Constructor */
      .constructor-area {
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      }

      .slot-row {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        min-height: 60px;
        margin-bottom: 20px;
        padding: 10px;
        background: #f8f9fa;
        border-radius: 8px;
      }

      .sentence-part {
        padding: 8px 15px;
        background: white;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      .drop-slot {
        width: 120px;
        height: 40px;
        border: 2px dashed #bbb;
        border-radius: 4px;
        background: rgba(0, 0, 0, 0.02);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
      }

      .drop-slot.active {
        background: #e3f2fd;
        border-color: var(--accent-blue);
      }

      .draggable-word {
        padding: 8px 15px;
        background: var(--accent-gold);
        color: white;
        border-radius: 20px;
        cursor: grab;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      .draggable-word.placed {
        margin: 0;
        box-shadow: none;
      }

      .comma-box {
        width: 20px;
        text-align: center;
        font-weight: bold;
        color: var(--accent-red);
        font-size: 1.5rem;
        display: none; /* Hidden by default until word dropped */
      }

      .drop-slot:has(.draggable-word) + .comma-box,
      .comma-box:has(+ .drop-slot > .draggable-word) {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <a href="../index.html" class="logo">Samovar.</a>
        <nav>
          <a href="../index.html">–ì–ª–∞–≤–Ω–∞—è</a>
          <a href="isolated-members.html">–û–±–æ—Å–æ–±–ª–µ–Ω–Ω—ã–µ</a>
          <a
            href="introductory-words.html"
            class="active"
            style="color: var(--text-ink); border-bottom: 2px solid var(--accent-red)"
            >–í–≤–æ–¥–Ω—ã–µ</a
          >
        </nav>
      </header>

      <main class="content-block">
        <div class="content-main">
          <div class="conductor-visual">
            <div class="conductor-title">–î–∏—Ä–∏–∂–µ—Ä—ã —Ä–µ—á–∏</div>
            <p>–í–≤–æ–¥–Ω—ã–µ —Å–ª–æ–≤–∞ –Ω–µ –Ω–µ—Å—É—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –Ω–æ —É–ø—Ä–∞–≤–ª—è—é—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.</p>
            <div class="tag-cloud">
              <span class="intro-tag">–ö–æ–Ω–µ—á–Ω–æ</span>
              <span class="intro-tag">–ö–∞–∂–µ—Ç—Å—è</span>
              <span class="intro-tag">–ö —Å—á–∞—Å—Ç—å—é</span>
              <span class="intro-tag">–í–æ-–ø–µ—Ä–≤—ã—Ö</span>
            </div>
          </div>

          <section id="categories">
            <div class="category-section">
              <div class="category-header">
                <span class="cat-icon">üéØ</span>
                <span class="cat-title">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å</span>
              </div>
              <div class="word-grid">
                <div class="word-card">
                  <span class="word-ru">–ö–æ–Ω–µ—á–Ω–æ</span><span class="word-dk">Selvf√∏lgelig</span>
                </div>
                <div class="word-card">
                  <span class="word-ru">–ë–µ–∑—É—Å–ª–æ–≤–Ω–æ</span><span class="word-dk">Uden tvivl</span>
                </div>
                <div class="word-card">
                  <span class="word-ru">–†–∞–∑—É–º–µ–µ—Ç—Å—è</span><span class="word-dk">Naturligvis</span>
                </div>
              </div>
            </div>

            <div class="category-section">
              <div class="category-header">
                <span class="cat-icon">üé≤</span>
                <span class="cat-title">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</span>
              </div>
              <div class="word-grid">
                <div class="word-card">
                  <span class="word-ru">–ö–∞–∂–µ—Ç—Å—è</span><span class="word-dk">Det lader til</span>
                </div>
                <div class="word-card">
                  <span class="word-ru">–í–æ–∑–º–æ–∂–Ω–æ</span><span class="word-dk">Muligvis</span>
                </div>
                <div class="word-card">
                  <span class="word-ru">–ú–æ–∂–µ—Ç –±—ã—Ç—å</span><span class="word-dk">M√•ske</span>
                </div>
                <div class="word-card">
                  <span class="word-ru">–í–µ—Ä–æ—è—Ç–Ω–æ</span><span class="word-dk">Sandsynligvis</span>
                </div>
              </div>
            </div>

            <div class="category-section">
              <div class="category-header">
                <span class="cat-icon">‚ù§Ô∏è</span>
                <span class="cat-title">–ß—É–≤—Å—Ç–≤–∞</span>
              </div>
              <div class="word-grid">
                <div class="word-card">
                  <span class="word-ru">–ö —Å—á–∞—Å—Ç—å—é</span><span class="word-dk">Heldigvis</span>
                </div>
                <div class="word-card">
                  <span class="word-ru">–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é</span><span class="word-dk">Desv√¶rre</span>
                </div>
                <div class="word-card">
                  <span class="word-ru">–ö —É–¥–∏–≤–ª–µ–Ω–∏—é</span
                  ><span class="word-dk">Til overraskelse</span>
                </div>
              </div>
            </div>
          </section>

          <section id="practice">
            <h2>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: –ù–∞–π–¥–∏ –º–µ—Å—Ç–æ</h2>
            <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≤–≤–æ–¥–Ω–æ–µ —Å–ª–æ–≤–æ –≤ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Å–ª–æ—Ç. –ó–∞–ø—è—Ç—ã–µ –ø–æ—è–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!</p>

            <div class="constructor-area" id="constructorArea">
              <!-- JS Generated -->
            </div>
            <div id="feedback" style="margin-top: 20px; font-weight: bold"></div>
          </section>
        </div>

        <aside class="content-note">
          <div class="margin-note">
            <strong>–ü—Ä–∞–≤–∏–ª–æ</strong>
            –í–≤–æ–¥–Ω—ã–µ —Å–ª–æ–≤–∞ –≤—Å–µ–≥–¥–∞ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –∑–∞–ø—è—Ç—ã–º–∏. –ï—Å–ª–∏ —Å—Ç–æ—è—Ç –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ ‚Äî —Å –¥–≤—É—Ö —Å—Ç–æ—Ä–æ–Ω.
          </div>
        </aside>
      </main>

      <footer>
        <div>&copy; 2025 Samovar. –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç.</div>
      </footer>
    </div>

    <script>
      const tasks = [
        {
          parts: ['–û–Ω', '–ø—Ä–∏–¥–µ—Ç', '–∑–∞–≤—Ç—Ä–∞'],
          word: '–∫–æ–Ω–µ—á–Ω–æ',
          correctSlot: 1, // 0: Start, 1: After '–û–Ω', 2: After '–ø—Ä–∏–¥–µ—Ç'
        },
        {
          parts: ['–ú—ã', '–æ–ø–æ–∑–¥–∞–ª–∏', '–Ω–∞ –ø–æ–µ–∑–¥'],
          word: '–∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é',
          correctSlot: 0, // Start
        },
      ];

      const area = document.getElementById('constructorArea');
      const feedback = document.getElementById('feedback');

      tasks.forEach((task, i) => {
        const row = document.createElement('div');
        row.className = 'slot-row';

        // Create slots and parts
        // Logic: Slot - Part - Slot - Part ...

        const createSlot = (idx) => {
          const slot = document.createElement('div');
          slot.className = 'drop-slot';
          slot.dataset.idx = idx;
          slot.dataset.task = i;

          slot.ondragover = (e) => {
            e.preventDefault();
            slot.classList.add('active');
          };
          slot.ondragleave = () => slot.classList.remove('active');
          slot.ondrop = (e) => handleDrop(e, slot, task);
          return slot;
        };

        // Initial slot
        const s0 = createSlot(0);
        const c0 = document.createElement('span');
        c0.className = 'comma-box';
        c0.innerText = ',';
        row.appendChild(s0);
        row.appendChild(c0);

        task.parts.forEach((part, pIdx) => {
          const p = document.createElement('div');
          p.className = 'sentence-part';
          p.innerText = part;
          row.appendChild(p);

          // Slot after part
          const c = document.createElement('span');
          c.className = 'comma-box';
          c.innerText = ',';
          const s = createSlot(pIdx + 1);

          if (pIdx < task.parts.length - 1) {
            row.appendChild(c); // Comma before next slot? No, logic is tricky visually.
            // Simplified visual: Just Part | Comma | Slot | Comma | Part
            // Let's stick to simple: Part [Slot] Part
          }
          // Actually, let's just put slots between parts.
        });

        // Clear row and rebuild simpler
        row.innerHTML = '';

        // Slot 0
        row.appendChild(createSlot(0));
        const comma1 = document.createElement('span');
        comma1.className = 'comma-box';
        comma1.innerText = ', ';
        row.appendChild(comma1);

        task.parts.forEach((part, pIdx) => {
          const pDiv = document.createElement('div');
          pDiv.className = 'sentence-part';
          pDiv.innerText = part;
          row.appendChild(pDiv);

          if (pIdx < task.parts.length) {
            const cLeft = document.createElement('span');
            cLeft.className = 'comma-box';
            cLeft.innerText = ', ';
            const s = createSlot(pIdx + 1);
            const cRight = document.createElement('span');
            cRight.className = 'comma-box';
            cRight.innerText = ', ';

            row.appendChild(cLeft);
            row.appendChild(s);
            row.appendChild(cRight);
          }
        });

        // Draggable Word
        const wordContainer = document.createElement('div');
        wordContainer.style.marginTop = '10px';
        const dragWord = document.createElement('div');
        dragWord.className = 'draggable-word';
        dragWord.draggable = true;
        dragWord.innerText = task.word;
        dragWord.id = `drag-${i}`;

        dragWord.ondragstart = (e) => {
          e.dataTransfer.setData('text', e.target.id);
        };

        wordContainer.appendChild(dragWord);

        area.appendChild(row);
        area.appendChild(wordContainer);
        area.appendChild(document.createElement('hr'));
      });

      function handleDrop(e, slot, task) {
        e.preventDefault();
        slot.classList.remove('active');
        const id = e.dataTransfer.getData('text');
        const el = document.getElementById(id);

        // Move element
        slot.appendChild(el);
        el.classList.add('placed');

        // Check logic? For now just visual feedback of commas appearing via CSS
        // CSS :has selector handles commas.

        // Simple validation
        const slotIdx = parseInt(slot.dataset.idx);
        // Logic check would go here
      }
    </script>
  </body>
</html>
